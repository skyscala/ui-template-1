aW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7Q291bnRyeVNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2UvY291bnRyeXNlcnZpY2UnOwppbXBvcnQge1NlbGVjdEl0ZW19IGZyb20gJ3ByaW1lbmcvYXBpJzsKaW1wb3J0IHtCcmVhZGNydW1iU2VydmljZX0gZnJvbSAnLi4vLi4vYXBwLmJyZWFkY3J1bWIuc2VydmljZSc7CgpAQ29tcG9uZW50KHsKICAgIHRlbXBsYXRlVXJsOiAnLi9pbnB1dGRlbW8uY29tcG9uZW50Lmh0bWwnLAogICAgc3R5bGVzOiBbYDpob3N0IDo6bmctZGVlcCAucC1tdWx0aXNlbGVjdCB7CgkJbWluLXdpZHRoOiAxNXJlbTsKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLm11bHRpc2VsZWN0LWN1c3RvbS12aXJ0dWFsLXNjcm9sbCAucC1tdWx0aXNlbGVjdCB7CgkJbWluLXdpZHRoOiAyMHJlbTsKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLm11bHRpc2VsZWN0LWN1c3RvbSAucC1tdWx0aXNlbGVjdC1sYWJlbCB7CgkJcGFkZGluZy10b3A6IC4yNXJlbTsKCQlwYWRkaW5nLWJvdHRvbTogLjI1cmVtOwoKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLm11bHRpc2VsZWN0LWN1c3RvbSAuY291bnRyeS1pdGVtLmNvdW50cnktaXRlbS12YWx1ZSB7CgkJcGFkZGluZzogLjI1cmVtIC41cmVtOwoJCWJvcmRlci1yYWRpdXM6IDNweDsKCQlkaXNwbGF5OiBpbmxpbmUtZmxleDsKCQltYXJnaW4tcmlnaHQ6IC41cmVtOwoJCWJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOwoJCWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLXRleHQpOwoJfQoKCTpob3N0IDo6bmctZGVlcCAubXVsdGlzZWxlY3QtY3VzdG9tIC5jb3VudHJ5LWl0ZW0uY291bnRyeS1pdGVtLXZhbHVlIGltZy5mbGFnIHsKCQl3aWR0aDogMTdweDsKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLm11bHRpc2VsZWN0LWN1c3RvbSAuY291bnRyeS1pdGVtIHsKCQlkaXNwbGF5OiBmbGV4OwoJCWFsaWduLWl0ZW1zOiBjZW50ZXI7Cgl9CgoJOmhvc3QgOjpuZy1kZWVwIC5tdWx0aXNlbGVjdC1jdXN0b20gLmNvdW50cnktaXRlbSBpbWcuZmxhZyB7CgkJd2lkdGg6IDE4cHg7CgkJbWFyZ2luLXJpZ2h0OiAuNXJlbTsKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLm11bHRpc2VsZWN0LWN1c3RvbSAuY291bnRyeS1wbGFjZWhvbGRlciB7CgkJcGFkZGluZzogMC4yNXJlbTsKCX0KCgk6aG9zdCA6Om5nLWRlZXAgLnAtY29sb3JwaWNrZXIgewoJCXdpZHRoOiAyLjVlbQoJfQogICAgYF0KfSkKZXhwb3J0IGNsYXNzIElucHV0RGVtb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdHsKICAgIGNvdW50cmllczogYW55W107CgogICAgZmlsdGVyZWRDb3VudHJpZXM6IGFueVtdOwoKICAgIHNlbGVjdGVkQ291bnRyeUFkdmFuY2VkOiBhbnlbXTsKCiAgICB2YWxTbGlkZXIgPSA1MDsKCiAgICB2YWxDb2xvciA9ICcjNDI0MjQyJzsKCiAgICB2YWxSYWRpbzogc3RyaW5nOwoKICAgIHZhbENoZWNrOiBzdHJpbmdbXSA9IFtdOwoKICAgIHZhbFN3aXRjaDogYm9vbGVhbjsKCiAgICBjaXRpZXM6IFNlbGVjdEl0ZW1bXTsKCiAgICBzZWxlY3RlZExpc3Q6IFNlbGVjdEl0ZW07CgogICAgc2VsZWN0ZWREcm9wOiBTZWxlY3RJdGVtOwoKICAgIHNlbGVjdGVkTXVsdGk6IHN0cmluZ1tdID0gW107CgogICAgdmFsVG9nZ2xlID0gZmFsc2U7CgogICAgcGF5bWVudE9wdGlvbnM6IGFueVtdOwoKICAgIHZhbFNlbGVjdDE6IHN0cmluZzsKCiAgICB2YWxTZWxlY3QyOiBzdHJpbmc7CgogICAgdmFsdWVLbm9iID0gMjA7CgogICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb3VudHJ5U2VydmljZTogQ291bnRyeVNlcnZpY2UsIHByaXZhdGUgYnJlYWRjcnVtYlNlcnZpY2U6IEJyZWFkY3J1bWJTZXJ2aWNlKSB7CiAgICAgICAgdGhpcy5icmVhZGNydW1iU2VydmljZS5zZXRJdGVtcyhbCiAgICAgICAgICAgIHtsYWJlbDogJ0lucHV0J30KICAgICAgICBdKTsKICAgIH0KCiAgICBuZ09uSW5pdCgpIHsKICAgICAgICB0aGlzLmNvdW50cnlTZXJ2aWNlLmdldENvdW50cmllcygpLnRoZW4oY291bnRyaWVzID0-IHsKICAgICAgICAgICAgdGhpcy5jb3VudHJpZXMgPSBjb3VudHJpZXM7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuY2l0aWVzID0gWwogICAgICAgICAgICB7bGFiZWw6ICdOZXcgWW9yaycsIHZhbHVlOiB7aWQ6IDEsIG5hbWU6ICdOZXcgWW9yaycsIGNvZGU6ICdOWSd9fSwKICAgICAgICAgICAge2xhYmVsOiAnUm9tZScsIHZhbHVlOiB7aWQ6IDIsIG5hbWU6ICdSb21lJywgY29kZTogJ1JNJ319LAogICAgICAgICAgICB7bGFiZWw6ICdMb25kb24nLCB2YWx1ZToge2lkOiAzLCBuYW1lOiAnTG9uZG9uJywgY29kZTogJ0xETid9fSwKICAgICAgICAgICAge2xhYmVsOiAnSXN0YW5idWwnLCB2YWx1ZToge2lkOiA0LCBuYW1lOiAnSXN0YW5idWwnLCBjb2RlOiAnSVNUJ319LAogICAgICAgICAgICB7bGFiZWw6ICdQYXJpcycsIHZhbHVlOiB7aWQ6IDUsIG5hbWU6ICdQYXJpcycsIGNvZGU6ICdQUlMnfX0KICAgICAgICBdOwoKICAgICAgICB0aGlzLnBheW1lbnRPcHRpb25zID0gWwogICAgICAgICAgICB7bmFtZTogJ09wdGlvbiAxJywgdmFsdWU6IDF9LAogICAgICAgICAgICB7bmFtZTogJ09wdGlvbiAyJywgdmFsdWU6IDJ9LAogICAgICAgICAgICB7bmFtZTogJ09wdGlvbiAzJywgdmFsdWU6IDN9CiAgICAgICAgXTsKICAgIH0KCiAgICBmaWx0ZXJDb3VudHJ5KGV2ZW50KSB7CiAgICAgICAgY29uc3QgZmlsdGVyZWQ6IGFueVtdID0gW107CiAgICAgICAgY29uc3QgcXVlcnkgPSBldmVudC5xdWVyeTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY291bnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSB0aGlzLmNvdW50cmllc1tpXTsKICAgICAgICAgICAgaWYgKGNvdW50cnkubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocXVlcnkudG9Mb3dlckNhc2UoKSkgPT0gMCkgewogICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChjb3VudHJ5KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5maWx0ZXJlZENvdW50cmllcyA9IGZpbHRlcmVkOwogICAgfQp9Cg