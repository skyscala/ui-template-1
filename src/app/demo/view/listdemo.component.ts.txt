aW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7U2VsZWN0SXRlbX0gZnJvbSAncHJpbWVuZy9hcGknOwppbXBvcnQge1Byb2R1Y3R9IGZyb20gJy4uL2RvbWFpbi9wcm9kdWN0JzsKaW1wb3J0IHtQcm9kdWN0U2VydmljZX0gZnJvbSAnLi4vc2VydmljZS9wcm9kdWN0c2VydmljZSc7CmltcG9ydCB7QnJlYWRjcnVtYlNlcnZpY2V9IGZyb20gJy4uLy4uL2FwcC5icmVhZGNydW1iLnNlcnZpY2UnOwoKQENvbXBvbmVudCh7CiAgICB0ZW1wbGF0ZVVybDogJy4vbGlzdGRlbW8uY29tcG9uZW50Lmh0bWwnLAogICAgc3R5bGVVcmxzOiBbJy4vbGlzdGRlbW8uc2NzcyddCn0pCmV4cG9ydCBjbGFzcyBMaXN0RGVtb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7CgogICAgcHJvZHVjdHM6IFByb2R1Y3RbXTsKCiAgICBzb3J0T3B0aW9uczogU2VsZWN0SXRlbVtdOwoKICAgIHNvcnRPcmRlcjogbnVtYmVyOwoKICAgIHNvcnRGaWVsZDogc3RyaW5nOwoKICAgIHNvdXJjZUNpdGllczogYW55W107CgogICAgdGFyZ2V0Q2l0aWVzOiBhbnlbXTsKCiAgICBvcmRlckNpdGllczogYW55W107CgogICAgY29uc3RydWN0b3IocHJpdmF0ZSBwcm9kdWN0U2VydmljZTogUHJvZHVjdFNlcnZpY2UsIHByaXZhdGUgYnJlYWRjcnVtYlNlcnZpY2U6IEJyZWFkY3J1bWJTZXJ2aWNlKSB7CiAgICAgICAgdGhpcy5icmVhZGNydW1iU2VydmljZS5zZXRJdGVtcyhbCiAgICAgICAgICAgIHtsYWJlbDogJ0xpc3QnfQogICAgICAgIF0pOwogICAgfQoKICAgIG5nT25Jbml0KCkgewogICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdHMoKS50aGVuKGRhdGEgPT4gdGhpcy5wcm9kdWN0cyA9IGRhdGEpOwoKICAgICAgICB0aGlzLnNvdXJjZUNpdGllcyA9IFsKICAgICAgICAgICAge25hbWU6ICdTYW4gRnJhbmNpc2NvJywgY29kZTogJ1NGJ30sCiAgICAgICAgICAgIHtuYW1lOiAnTG9uZG9uJywgY29kZTogJ0xETid9LAogICAgICAgICAgICB7bmFtZTogJ1BhcmlzJywgY29kZTogJ1BSUyd9LAogICAgICAgICAgICB7bmFtZTogJ0lzdGFuYnVsJywgY29kZTogJ0lTVCd9LAogICAgICAgICAgICB7bmFtZTogJ0JlcmxpbicsIGNvZGU6ICdCUkwnfSwKICAgICAgICAgICAge25hbWU6ICdCYXJjZWxvbmEnLCBjb2RlOiAnQlJDJ30sCiAgICAgICAgICAgIHtuYW1lOiAnUm9tZScsIGNvZGU6ICdSTSd9XTsKICAgICAgICB0aGlzLnRhcmdldENpdGllcyA9IFtdOwoKICAgICAgICB0aGlzLm9yZGVyQ2l0aWVzID0gWwogICAgICAgICAgICB7bmFtZTogJ1NhbiBGcmFuY2lzY28nLCBjb2RlOiAnU0YnfSwKICAgICAgICAgICAge25hbWU6ICdMb25kb24nLCBjb2RlOiAnTEROJ30sCiAgICAgICAgICAgIHtuYW1lOiAnUGFyaXMnLCBjb2RlOiAnUFJTJ30sCiAgICAgICAgICAgIHtuYW1lOiAnSXN0YW5idWwnLCBjb2RlOiAnSVNUJ30sCiAgICAgICAgICAgIHtuYW1lOiAnQmVybGluJywgY29kZTogJ0JSTCd9LAogICAgICAgICAgICB7bmFtZTogJ0JhcmNlbG9uYScsIGNvZGU6ICdCUkMnfSwKICAgICAgICAgICAge25hbWU6ICdSb21lJywgY29kZTogJ1JNJ31dOwoKICAgICAgICB0aGlzLnNvcnRPcHRpb25zID0gWwogICAgICAgICAgICB7bGFiZWw6ICdQcmljZSBIaWdoIHRvIExvdycsIHZhbHVlOiAnIXByaWNlJ30sCiAgICAgICAgICAgIHtsYWJlbDogJ1ByaWNlIExvdyB0byBIaWdoJywgdmFsdWU6ICdwcmljZSd9CiAgICAgICAgXTsKICAgIH0KCiAgICBvblNvcnRDaGFuZ2UoZXZlbnQpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LnZhbHVlOwoKICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignIScpID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuc29ydE9yZGVyID0gLTE7CiAgICAgICAgICAgIHRoaXMuc29ydEZpZWxkID0gdmFsdWUuc3Vic3RyaW5nKDEsIHZhbHVlLmxlbmd0aCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSAxOwogICAgICAgICAgICB0aGlzLnNvcnRGaWVsZCA9IHZhbHVlOwogICAgICAgIH0KICAgIH0KfQo