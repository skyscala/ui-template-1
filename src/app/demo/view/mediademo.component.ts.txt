aW1wb3J0IHtDb21wb25lbnQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFByb2R1Y3RTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZS9wcm9kdWN0c2VydmljZSc7CmltcG9ydCB7IFBob3RvU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2UvcGhvdG9zZXJ2aWNlJzsKaW1wb3J0IHsgUHJvZHVjdCB9IGZyb20gJy4uL2RvbWFpbi9wcm9kdWN0JzsKaW1wb3J0IHtCcmVhZGNydW1iU2VydmljZX0gZnJvbSAnLi4vLi4vYXBwLmJyZWFkY3J1bWIuc2VydmljZSc7CgpAQ29tcG9uZW50KHsKICAgIHRlbXBsYXRlVXJsOiAnLi9tZWRpYWRlbW8uY29tcG9uZW50Lmh0bWwnLAogICAgc3R5bGVVcmxzOiBbJy4vbWVkaWFkZW1vLnNjc3MnXSwKfSkKZXhwb3J0IGNsYXNzIE1lZGlhRGVtb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdHsKCiAgICBwcm9kdWN0czogUHJvZHVjdFtdOwoKICAgIGltYWdlczogYW55W107CgogICAgZ2FsbGVyaWFSZXNwb25zaXZlT3B0aW9uczogYW55W10gPSBbCiAgICAgICAgewogICAgICAgICAgICBicmVha3BvaW50OiAnMTAyNHB4JywKICAgICAgICAgICAgbnVtVmlzaWJsZTogNQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICBicmVha3BvaW50OiAnOTYwcHgnLAogICAgICAgICAgICBudW1WaXNpYmxlOiA0CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIGJyZWFrcG9pbnQ6ICc3NjhweCcsCiAgICAgICAgICAgIG51bVZpc2libGU6IDMKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgYnJlYWtwb2ludDogJzU2MHB4JywKICAgICAgICAgICAgbnVtVmlzaWJsZTogMQogICAgICAgIH0KICAgIF07CgogICAgY2Fyb3VzZWxSZXNwb25zaXZlT3B0aW9uczogYW55W10gPSBbCiAgICAgICAgewogICAgICAgICAgICBicmVha3BvaW50OiAnMTAyNHB4JywKICAgICAgICAgICAgbnVtVmlzaWJsZTogMywKICAgICAgICAgICAgbnVtU2Nyb2xsOiAzCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIGJyZWFrcG9pbnQ6ICc3NjhweCcsCiAgICAgICAgICAgIG51bVZpc2libGU6IDIsCiAgICAgICAgICAgIG51bVNjcm9sbDogMgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICBicmVha3BvaW50OiAnNTYwcHgnLAogICAgICAgICAgICBudW1WaXNpYmxlOiAxLAogICAgICAgICAgICBudW1TY3JvbGw6IDEKICAgICAgICB9CiAgICBdOwoKICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJvZHVjdFNlcnZpY2U6IFByb2R1Y3RTZXJ2aWNlLCBwcml2YXRlIHBob3RvU2VydmljZTogUGhvdG9TZXJ2aWNlLCBwcml2YXRlIGJyZWFkY3J1bWJTZXJ2aWNlOiBCcmVhZGNydW1iU2VydmljZSkgewogICAgICAgIHRoaXMuYnJlYWRjcnVtYlNlcnZpY2Uuc2V0SXRlbXMoWwogICAgICAgICAgICB7bGFiZWw6ICdNZWRpYSd9CiAgICAgICAgXSk7CiAgICB9CgogICAgbmdPbkluaXQoKSB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS5nZXRQcm9kdWN0c1NtYWxsKCkudGhlbihwcm9kdWN0cyA9PiB7CiAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSBwcm9kdWN0czsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5waG90b1NlcnZpY2UuZ2V0SW1hZ2VzKCkudGhlbihpbWFnZXMgPT4gewogICAgICAgICAgICB0aGlzLmltYWdlcyA9IGltYWdlczsKICAgICAgICB9KTsKICAgIH0KfQo